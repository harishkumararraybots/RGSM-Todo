<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#160f2e" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="RGSM" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./assets/icons/icon-192.png" sizes="192x192" />
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/icon-192.png" />
  <title>RGSM</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
  <h1 class="brand">RGSM</h1>
    <div class="header-actions">
      <button id="notifyBtn" class="btn outline">Enable notifications</button>
      <button id="installBtn" class="btn secondary" hidden>Install</button>
    </div>
  </header>

  <main class="container">
  <section id="dashboard" class="dashboard compact" aria-label="Task summary">
      <div class="dash-card">
        <div class="dash-title">Overdue</div>
        <div class="dash-value" id="dashOverdue">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">Pending</div>
        <div class="dash-value" id="dashPending">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">Today</div>
        <div class="dash-value" id="dashToday">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">Done</div>
        <div class="dash-value" id="dashDone">0</div>
      </div>
      <!-- Status breakdown -->
      <div class="dash-card">
        <div class="dash-title">Not started</div>
        <div class="dash-value" id="dashStatusNotStarted">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">In progress</div>
        <div class="dash-value" id="dashStatusInProgress">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">Pending</div>
        <div class="dash-value" id="dashStatusPending">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">Blocked</div>
        <div class="dash-value" id="dashStatusBlocked">0</div>
      </div>
      <div class="dash-card">
        <div class="dash-title">Completed</div>
        <div class="dash-value" id="dashStatusCompleted">0</div>
      </div>
    </section>
    <div class="dash-controls" style="display:flex; justify-content:flex-end; margin-top:4px;">
      <button id="dashToggle" class="btn outline tiny" aria-expanded="false" aria-controls="dashboard">Show status breakdown</button>
    </div>

    <section class="controls">
      <div class="filters" role="tablist" aria-label="Filters">
        <button class="chip active" data-filter="all" role="tab" aria-selected="true">All</button>
        <button class="chip" data-filter="today" role="tab">Today</button>
        <button class="chip" data-filter="upcoming" role="tab">Upcoming</button>
        <button class="chip" data-filter="done" role="tab">Done</button>
      </div>
      <div class="search">
        <input id="search" type="search" placeholder="Search tasks..." />
      </div>
    </section>

    <section>
      <ul id="list" class="list" aria-live="polite"></ul>
      <div class="empty" id="emptyState" hidden>No tasks yet — add your first with the + button.</div>
    </section>

    <section class="actions">
      <button id="clearDone" class="btn danger outline">Clear completed</button>
      <button id="exportJson" class="btn outline">Export</button>
  <input id="importFile" type="file" accept="text/csv,.csv,application/json" hidden />
      <button id="importJson" class="btn outline">Import</button>
    </section>
  </main>

  <!-- Floating add button -->
  <button id="fabAdd" class="fab" aria-label="Add task" title="Add task">+</button>

  <!-- Add task modal -->
  <div id="addModal" class="modal" hidden aria-hidden="true" role="dialog" aria-labelledby="addModalTitle">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-dialog">
      <header class="modal-header">
        <h2 id="addModalTitle">Add task</h2>
        <button class="modal-close" data-close aria-label="Close">×</button>
      </header>
      <form id="todoForm" class="modal-body" autocomplete="off">
        <label>
          <span class="label">Title</span>
          <input id="title" name="title" type="text" placeholder="What needs doing?" required maxlength="120" />
        </label>
        <label>
          <span class="label">Details</span>
          <input id="details" name="details" type="text" placeholder="Details (optional)" maxlength="300" />
        </label>
        <label>
          <span class="label">Due date</span>
          <input id="due" name="due" type="date" />
        </label>
        <footer class="modal-actions">
          <button type="button" class="btn outline" data-close>Cancel</button>
          <button type="submit" class="btn primary">Add task</button>
        </footer>
      </form>
    </div>
  </div>

  <footer class="app-footer">
    <small class="footer-meta">
      <span class="made-by">Created by Arraybots</span>
      <span class="dot">•</span>
      <time id="today" aria-label="Today"></time>
    </small>
  </footer>

  <script src="./app.js" type="module"></script>
</body>
</html>
